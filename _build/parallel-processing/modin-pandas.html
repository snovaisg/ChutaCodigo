---
interact_link: content/parallel-processing/modin-pandas.ipynb
kernel_name: python3
has_widgets: false
title: |-
  Modin Pandas
prev_page:
  url: /parallel-processing/intro.html
  title: |-
    Parallel Processing
next_page:
  url: /parallel-processing/rapids.html
  title: |-
    RAPIDS
suffix: .ipynb

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    
<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="images/modin_logo.png"></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default, Pandas executes its functions as a single process using a <strong>single CPU core.</strong> That works just fine for smaller datasets since you might not notice much of a difference in speed. But with larger datasets, speed starts to take a major hit when using only a single core. It’s doing just one calculation at a time for a dataset that can have millions or even billions of rows.</p>
<p>Modin is a new library designed to accelerate Pandas by automatically distributing the computation across all of the <strong>system’s available CPU cores.</strong> With that, Modin claims to be able to get nearly linear speedup to the number of CPU cores on your system for Pandas DataFrames of any size.</p>
<p><strong>Documentation:</strong></p>
<ul>
<li><a href="https://readthedocs.org/projects/modin/downloads/pdf/latest/">https://readthedocs.org/projects/modin/downloads/pdf/latest/</a> <strong>pdf</strong></li>
<li><a href="https://modin.readthedocs.io/en/latest/#faster-pandas-even-on-your-laptop">https://modin.readthedocs.io/en/latest/#faster-pandas-even-on-your-laptop</a> <strong>site</strong></li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="How-it-works">How it works<a class="anchor-link" href="#How-it-works"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Parallelizing a calculation is as easy as applying that calculation on different data points across every available CPU core. For a Pandas DataFrame, a basic idea would be to divide up the DataFrame into a few pieces, as many pieces as you have CPU cores, and let each CPU core run the calculation on its own piece. In the end, we can aggregate the results, which is a computationally cheap operation.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="images/cpu_architecture.png"></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That’s exactly what Modin does. It slices your DataFrame into different parts such that each part can be sent to a different CPU core. Modin partitions the DataFrames across both the rows and the columns. This makes Modin’s parallel processing scalable to DataFrames of any shape.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Imagine if you are given a DataFrame with many columns but fewer rows. Some libraries only perform the partitioning across rows, which would be inefficient in this case since we have more columns than rows. But with Modin, since the partitioning is done across both dimensions, the parallel processing remains efficient all shapes of DataFrames, whether they are wider (lots of columns), longer (lots of rows), or both.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="images/df_schema.png"></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Install">Install<a class="anchor-link" href="#Install"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To do a lot of the heavy lifting when it comes to executing the parallel processing, Modin can use either <strong>Dask</strong> or <strong>Ray</strong>. Both of them are parallel computing libraries with Python APIs and you can select one or the other to use with Modin at runtime. Ray will be the safest one to use for now as it is more stable — the Dask backend is experimental.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install modin<span class="o">[</span>ray<span class="o">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Requirement already satisfied: modin[ray] in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (0.6.3)
Requirement already satisfied: pandas==0.25.3 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from modin[ray]) (0.25.3)
Requirement already satisfied: ray==0.7.3; extra == &#34;ray&#34; in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from modin[ray]) (0.7.3)
Requirement already satisfied: pytz&gt;=2017.2 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pandas==0.25.3-&gt;modin[ray]) (2019.1)
Requirement already satisfied: numpy&gt;=1.13.3 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pandas==0.25.3-&gt;modin[ray]) (1.14.6)
Requirement already satisfied: python-dateutil&gt;=2.6.1 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pandas==0.25.3-&gt;modin[ray]) (2.8.0)
Requirement already satisfied: pytest in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (5.1.2)
Requirement already satisfied: pyyaml in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (5.1)
Requirement already satisfied: click in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (7.0)
Requirement already satisfied: funcsigs in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (1.0.2)
Requirement already satisfied: filelock in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (3.0.12)
Requirement already satisfied: six&gt;=1.0.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (1.12.0)
Requirement already satisfied: redis in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (3.3.11)
Requirement already satisfied: colorama in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (0.4.3)
Requirement already satisfied: protobuf&gt;=3.8.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (3.11.1)
Requirement already satisfied: attrs&gt;=17.4.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (19.1.0)
Requirement already satisfied: atomicwrites&gt;=1.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (1.3.0)
Requirement already satisfied: importlib-metadata&gt;=0.12; python_version &lt; &#34;3.8&#34; in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (0.21)
Requirement already satisfied: packaging in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (19.0)
Requirement already satisfied: py&gt;=1.5.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (1.8.0)
Requirement already satisfied: more-itertools&gt;=4.0.0 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (7.2.0)
Requirement already satisfied: wcwidth in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (0.1.7)
Requirement already satisfied: pluggy&lt;1.0,&gt;=0.12 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (0.13.0)
Requirement already satisfied: setuptools in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from protobuf&gt;=3.8.0-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (41.0.1)
Requirement already satisfied: zipp&gt;=0.5 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from importlib-metadata&gt;=0.12; python_version &lt; &#34;3.8&#34;-&gt;pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (0.6.0)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /home/calado/.virtualenvs/dl4cv/lib/python3.6/site-packages (from packaging-&gt;pytest-&gt;ray==0.7.3; extra == &#34;ray&#34;-&gt;modin[ray]) (2.4.0)
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Benchmarks-and-Examples">Benchmarks and Examples<a class="anchor-link" href="#Benchmarks-and-Examples"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">modin.pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Practical-Tips-for-using-Modin">Practical Tips for using Modin<a class="anchor-link" href="#Practical-Tips-for-using-Modin"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default, Modin will use all of the CPU cores available on your machine. There may be some cases where you wish to limit the number of CPU cores</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ignore_reinit_error</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">modin.pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2019-12-10 01:32:03,231	WARNING worker.py:1373 -- WARNING: Not updating worker name since `setproctitle` is not installed. Install this with `pip install setproctitle` (or ray[debug]) to enable monitoring of worker processes.
2019-12-10 01:32:03,243	ERROR worker.py:1379 -- Calling ray.init() again after it has already been called.
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When working with big data, it’s not uncommon for the size of the dataset to exceed the amount of memory (RAM) on your system. Modin has a specific flag that we can set to true which will enable its out of core mode. Out of core basically means that Modin will use your disk as an overflow storage for your memory, allowing you to work with datasets far bigger than your RAM size. We can set the following environment variable to enable this functionality:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">export</span> <span class="nv">MODIN_OUT_OF_CORE</span><span class="o">=</span>true
</pre></div>

    </div>
</div>
</div>

</div>
</div>

 


    </main>
    